{"version":3,"sources":["../../src/ast/walkReduceTree.js"],"names":["forEachIndexed","forEach","forEachAny","iteratee","value","reduceWalkee","accum","node","keys","recur","result","children","child","childKdx","newKeys","walkReduceTree","tree"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEA,MAAMA,cAAc,GAAG,qBAASC,cAAT,CAAvB;;AAEA,MAAMC,UAAU,GAAG,CAACC,QAAD,EAAWC,KAAX,KAAqB;AACtC,MAAI,qBAAQA,KAAR,CAAJ,EAAoB;AAClB,WAAOJ,cAAc,CAACG,QAAD,EAAWC,KAAX,CAArB;AACD;;AACD,SAAO,8BAAkBD,QAAlB,EAA4BC,KAA5B,CAAP;AACD,CALD;;AAOA,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAQC,IAAR,EAAcC,IAAd,EAAoBL,QAApB,EAA8BM,KAA9B,KAAwC;AAC3D,MAAIC,MAAM,GAAGP,QAAQ,CAACG,KAAD,EAAQC,IAAR,EAAcC,IAAd,CAArB;AACA,QAAM;AAAEG,IAAAA;AAAF,MAAeJ,IAArB;;AACA,MAAI,sBAASI,QAAT,CAAJ,EAAwB;AACtBT,IAAAA,UAAU,CAAC,CAACU,KAAD,EAAQC,QAAR,KAAqB;AAC9B,YAAMC,OAAO,GAAG,mBAAON,IAAP,EAAa,CAACK,QAAD,CAAb,CAAhB;AACAH,MAAAA,MAAM,GAAGD,KAAK,CAACC,MAAD,EAASE,KAAT,EAAgBE,OAAhB,EAAyBX,QAAzB,CAAd;AACD,KAHS,EAGPQ,QAHO,CAAV;AAID;;AACD,SAAOD,MAAP;AACD,CAVD;;AAYA,MAAMK,cAAc,GAAG,kBAAM,CAACZ,QAAD,EAAWG,KAAX,EAAkBU,IAAlB,KAC3B,iBAAKX,YAAL,EAAmBC,KAAnB,EAA0BU,IAA1B,EAAgC,EAAhC,EAAoCb,QAApC,CADqB,CAAvB;eAIeY,c","sourcesContent":["import { isArray, isObject } from 'lodash'\nimport { addIndex, concat, curry, forEach, forEachObjIndexed } from 'ramda'\n\nimport { walk } from '../utils'\n\nconst forEachIndexed = addIndex(forEach)\n\nconst forEachAny = (iteratee, value) => {\n  if (isArray(value)) {\n    return forEachIndexed(iteratee, value)\n  }\n  return forEachObjIndexed(iteratee, value)\n}\n\nconst reduceWalkee = (accum, node, keys, iteratee, recur) => {\n  let result = iteratee(accum, node, keys)\n  const { children } = node\n  if (isObject(children)) {\n    forEachAny((child, childKdx) => {\n      const newKeys = concat(keys, [childKdx])\n      result = recur(result, child, newKeys, iteratee)\n    }, children)\n  }\n  return result\n}\n\nconst walkReduceTree = curry((iteratee, accum, tree) =>\n  walk(reduceWalkee, accum, tree, [], iteratee)\n)\n\nexport default walkReduceTree\n"],"file":"walkReduceTree.js"}